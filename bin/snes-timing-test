#!/usr/bin/python
import sys, time
from snes import core
from snes.video.pil_output import set_video_refresh_cb

game_path = sys.argv[1]

with open(game_path, "rb") as handle:
	core.load_cartridge_normal(handle.read())

RUN_COUNT = 600 # ~10 emulated seconds

start = time.clock()
for i in range(RUN_COUNT):
	core.run()
elapsed = time.clock() - start

print "%d frames in %0.3f seconds; %0.1ffps" % (
		RUN_COUNT, elapsed, (RUN_COUNT/elapsed)
	)
