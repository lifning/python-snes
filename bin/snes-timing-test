#!/usr/bin/python
import sys, time
from snes import core

gamePath = sys.argv[1]

with open(gamePath, "rb") as handle:
	print "Loading ROM: %s" % (gamePath,)
	core.load_cartridge_normal(handle.read())

refreshRate = core.get_refresh_rate()

print "Intended refresh-rate: %d" % (refreshRate,)

runCount = refreshRate * 10 # 10 emulated seconds.

start = time.clock()
for x in range(runCount):
	core.run()
elapsed = time.clock() - start

print "Result: Emulated %d frames in %0.3f seconds; %0.1ffps" % (
		runCount, elapsed, (runCount/elapsed)
	)
